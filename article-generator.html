<!DOCTYPE html>
<html>
<body>

<h2>AI Article Generator Adsense</h2>

<form id="myForm">
  <label for="apikey">API Key:</label><br>
  <input type="text" id="apikey" name="apikey" placeholder="Enter your API Key here"><br>
  <label for="model">Model:</label><br>
  <select id="model" name="model">
    <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
    <option value="gpt-4">gpt-4</option>
  </select><br>
  <label for="maxtoken">Max Token:</label><br>
  <input type="number" id="maxtoken" name="maxtoken" value="7000" placeholder="Enter the maximum token count"><br>
  <label for="titleMaxToken">Title Max Token:</label><br>
  <input type="number" id="titleMaxToken" name="titleMaxToken" value="20" placeholder="Enter the maximum token count for title"><br>
  <label for="subheadingMaxToken">Subheading Max Token:</label><br>
  <input type="number" id="subheadingMaxToken" name="subheadingMaxToken" value="1000" placeholder="Enter the maximum token count for subheading"><br>
  <label for="myFile">Upload a TXT file:</label><br>
  <input type="file" id="myFile" name="filename"><br>
  <label for="myText">Or paste your text here:</label><br>
  <textarea id="myText" rows="4" cols="50" placeholder="Paste your text here"></textarea><br>
  <input type="submit" value="Submit">
</form>

<div id="fileContent">
</div>

<button id="aiTitle">AI Title</button>
<button id="aiHeading">AI Heading</button>

<p id="counter">Total Articles: 0</p>

<style>
  .title {
    font-weight: bold;
    margin-top: 10px;
  }
  .subheading {
    margin-bottom: 20px;
  }
</style>

<script>
let articleCount = 0;

document.getElementById("myForm").addEventListener("submit", function(event){
  // existing code
});

document.getElementById("aiTitle").addEventListener("click", function() {
  var apikey = document.getElementById("apikey").value;
  var model = document.getElementById("model").value;
  var titleMaxToken = document.getElementById("titleMaxToken").value;
  
  for(var i = 0; i < articleCount; i++){
    var title = document.getElementById("title" + i).value;
    fetch('https://api.openai.com/v1/engines/' + model + '/completions', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer ' + apikey,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        prompt: title,
        max_tokens: titleMaxToken
      })
    })
    .then(response => response.json())
    .then(data => {
      document.getElementById("title" + i).value = data.choices[0].text;
    })
    .catch((error) => {
      console.error('Error:', error);
    });
  }
});

document.getElementById("aiHeading").addEventListener("click", function() {
  console.log("Generating subheadings...");
});
</script>

</body>
</html>
